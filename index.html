<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FORCE RECOVERY - Update 1.4</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    
    <script>
        // Simple Logic to ensure world is alive
        AFRAME.registerComponent('world-check', {
            init: function () {
                console.log("Scene Initialized. If you see this in logs, the engine is running.");
                this.el.addEventListener('loaded', () => {
                    console.log("All Entities Loaded.");
                });
            }
        });

        // "Play Game" Logic
        AFRAME.registerComponent('play-zone', {
            init: function() {
                this.el.addEventListener('click', () => {
                    let player = document.querySelector('#player');
                    player.setAttribute('position', "0 0.6 -1.5");
                    let winUI = document.querySelector('#win-display');
                    winUI.setAttribute('value', "SEATED - GAME READY");
                    winUI.setAttribute('visible', true);
                    setTimeout(() => { winUI.setAttribute('visible', false); }, 10000);
                });
            }
        });
    </script>
</head>
<body>
    <a-scene world-check renderer="antialias: true; colorManagement: true;" background="color: #222">
        
        <a-assets timeout="1000">
            <img id="floor-tex" src="assets/textures/floor_wood.jpg">
            <img id="chip-tex" src="assets/textures/poker_chip_diffuse.jpg">
        </a-assets>

        <a-entity id="player" position="0 0 5">
            <a-camera look-controls wasd-controls="enabled: true">
                <a-cursor color="red" fuse="false"></a-cursor>
            </a-camera>
            
            <a-entity id="leftHand" hand-tracking-controls="hand: left;"></a-entity>
            <a-entity id="rightHand" hand-tracking-controls="hand: right;"></a-entity>
        </a-entity>

        <a-light type="ambient" color="#ffffff" intensity="1.0"></a-light>
        <a-light type="directional" position="-1 2 1" intensity="1.0" color="#ffffff"></a-light>

        <a-text id="win-display" value="" position="0 2.5 -3" align="center" color="#FFD700" scale="2 2 2" visible="false"></a-text>

        <a-plane position="0 0 0" rotation="-90 0 0" width="100" height="100" color="#333" src="#floor-tex"></a-plane>

        <a-entity id="poker-table" position="0 0.7 -2">
            <a-cylinder radius="1.5" height="0.1" color="#076324"></a-cylinder>
            
            <a-box id="sit-trigger" play-zone position="0 0.5 1.5" width="1" height="0.3" depth="0.5" color="#FFD700">
                <a-text value="CLICK TO SIT" align="center" position="0 0.4 0" scale="0.6 0.6 0.6" color="black"></a-text>
            </a-box>
        </a-entity>

        <a-entity id="store-area" position="-5 0 -1" rotation="0 45 0">
            <a-box position="0 0.7 0" width="2" height="1.4" depth="0.8" color="#555"></a-box>
            <a-text value="STORE" position="0 1.6 0" align="center" scale="1.5 1.5 1.5"></a-text>
            
            <a-cylinder position="0 1.5 0" radius="0.1" height="0.2" color="red" 
                        onclick="document.querySelector('#win-display').setAttribute('value', 'CHIPS BOUGHT');"></a-cylinder>
        </a-entity>

    </a-scene>
</body>
</html>
