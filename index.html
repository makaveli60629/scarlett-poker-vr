<!DOCTYPE html>
<html>
  <head>
    <title>Scarlet VR - Poker</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-teleport-controls@0.2.x/dist/aframe-teleport-controls.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
  </head>
  <body>
    <a-scene>
      <a-assets>
        <img id="brick-wall" src="https://i.imgur.com/8X8X8X8.jpg" crossorigin="anonymous">
        <img id="scarlet-felt" src="https://i.imgur.com/ScarletLogo.png" crossorigin="anonymous">
        <a-asset-item id="card-model" src="card.glb"></a-asset-item>
      </a-assets>

      <a-entity id="rig" movement-controls="controls: checkpoint" position="0 0 0">
        <a-entity camera position="0 1.6 0" look-controls></a-entity>
        <a-entity oculus-touch-controls="hand: left" teleport-controls="button: trigger; collisionEntities: .nav-mesh"></a-entity>
        <a-entity oculus-touch-controls="hand: right" laser-controls="hand: right" raycaster="objects: .clickable"></a-entity>
      </a-entity>

      <a-box id="lobby" position="0 2 0" width="12" height="4" depth="12" material="src: #brick-wall" side="double">
        <a-text value="CLAIM DAILY CHIPS" position="0 1 -5.5" align="center" color="cyan"></a-text>
        <a-cylinder id="daily-chip" position="0 -1.9 -5.5" radius="0.3" height="0.05" color="blue" class="clickable" 
                    animation="property: rotation; to: 0 360 0; loop: true; dur: 3000"></a-cylinder>

        <a-entity id="back-door-frame" position="0 -0.5 5.9">
            <a-box id="door-mesh" width="1.5" height="3" depth="0.1" color="#3d2b1f" class="clickable"
                   animation__open="property: rotation; to: 0 90 0; startEvents: click">
            </a-box>
        </a-entity>
      </a-box>

      <a-entity id="room-1" position="-15 2 0">
        <a-box width="10" height="4" depth="10" material="src: #brick-wall" side="double"></a-box>
        <a-cylinder id="table-1" position="0 -1.2 0" radius="2" height="0.1" material="src: #scarlet-felt">
            <a-box class="clickable" position="0 0.2 1.5" width="0.8" height="0.1" depth="0.8" color="green"
                   onclick="sitPlayer(-15, 0, 1.5)">
                <a-text value="PLAY GAME" align="center" position="0 0.1 0" rotation="-90 0 0" scale="0.5 0.5 0.5"></a-text>
            </a-box>
        </a-cylinder>
      </a-entity>

      <a-entity id="room-2" position="0 2 -20">
        <a-box width="10" height="4" depth="10" material="src: #brick-wall" side="double"></a-box>
        <a-cylinder id="table-2" position="0 -1.2 0" radius="2" height="0.1" material="src: #scarlet-felt">
            <a-box class="clickable" position="0 0.2 1.5" width="0.8" height="0.1" depth="0.8" color="green"
                   onclick="sitPlayer(0, 0, -18.5)">
                <a-text value="PLAY GAME" align="center" position="0 0.1 0" rotation="-90 0 0" scale="0.5 0.5 0.5"></a-text>
            </a-box>
        </a-cylinder>
      </a-entity>

      <a-entity id="room-3" position="15 2 0">
        <a-box width="10" height="4" depth="10" material="src: #brick-wall" side="double"></a-box>
        <a-cylinder id="table-3" position="0 -1.2 0" radius="2" height="0.1" material="src: #scarlet-felt">
            <a-box class="clickable" position="0 0.2 1.5" width="0.8" height="0.1" depth="0.8" color="green"
                   onclick="sitPlayer(15, 0, 1.5)">
                <a-text value="PLAY GAME" align="center" position="0 0.1 0" rotation="-90 0 0" scale="0.5 0.5 0.5"></a-text>
            </a-box>
        </a-cylinder>
      </a-entity>

      <a-entity light="type: ambient; intensity: 0.4"></a-entity>
      <a-entity light="type: point; intensity: 0.8; distance: 50" position="0 5 0"></a-entity>

    </a-scene>

    <script>
      // SITTING LOGIC: Teleport to seat and spawn cards
      function sitPlayer(x, y, z) {
        const rig = document.querySelector('#rig');
        rig.setAttribute('position', {x: x, y: y, z: z});
        console.log("Player seated at coordinates:", x, y, z);
        dealCards(x, z);
      }

      // CARD LOGIC: Spawn low-poly realistic cards
      function dealCards(x, z) {
        // This function will trigger the card spawns on the table in front of the player
        console.log("Dealing low-poly realistic cards...");
      }
    </script>
  </body>
</html>
