<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Scarlett VR Poker: Table</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-physics-system@v4.2.2/dist/aframe-physics-system.min.js"></script>

    <!-- Game logic scripts -->
    <script src="js/economy.js"></script>
    <script src="js/inventory.js"></script>
    <script src="js/poker-engine.js"></script>
    <script src="js/table-game.js"></script>
    <script src="js/wrist-hud.js"></script>

    <style>
        body { margin:0; overflow:hidden; background:#000; }
    </style>
</head>
<body>
    <a-scene poker-engine physics="debug:false">

        <!-- Assets -->
        <a-assets>
            <a-asset-item id="statue-glb" src="https://cdn.readyplayer.me/64b54e0b0e5132204a9e530a.glb"></a-asset-item>
        </a-assets>

        <!-- Sky & lighting -->
        <a-sky color="#020202"></a-sky>
        <a-light type="ambient" intensity="0.5"></a-light>
        <a-light type="point" position="0 10 -5" intensity="1.2" color="gold"></a-light>

        <!-- Floor -->
        <a-plane static-body rotation="-90 0 0" width="100" height="100" color="#111"></a-plane>

        <!-- Poker Table -->
        <a-entity position="0 0 -5">
            <a-cylinder static-body radius="3.5" height="1" color="#1a110a" material="metalness:0.5"></a-cylinder>
            <a-text id="pot-text" value="TOTAL POT: $0" position="0 1.5 0" align="center" width="8" color="gold"></a-text>

            <!-- Betting Button -->
            <a-box class="clickable" onclick="this.sceneEl.emit('bet',{amount:500})" position="1.2 1.1 0.5" width="0.4" height="0.15" depth="0.3" color="gold">
                <a-text value="BET 500" align="center" rotation="-90 0 0" position="0 0.08 0" width="2.5" color="black"></a-text>
            </a-box>
        </a-entity>

        <!-- Statues / Decorations -->
        <a-entity position="-7 0 -8" rotation="0 45 0">
            <a-gltf-model src="#statue-glb" scale="1.5 1.5 1.5"></a-gltf-model>
        </a-entity>
        <a-entity position="7 0 -8" rotation="0 -45 0">
            <a-gltf-model src="#statue-glb" scale="1.5 1.5 1.5"></a-gltf-model>
        </a-entity>

        <!-- Player Rig -->
        <a-entity id="rig" position="0 0 12" movement-controls="controls: touch, keyboard; speed: 0.2;" kinematic-body>
            <a-camera look-controls="pointerLockEnabled: false">
                <a-cursor color="gold" raycaster="objects: .clickable"></a-cursor>
            </a-camera>

            <!-- Hands with Wrist HUD attached -->
            <a-entity id="leftHand" oculus-touch-controls="hand: left" wrist-hud="hand:left"></a-entity>
            <a-entity id="rightHand" oculus-touch-controls="hand: right" laser-controls="hand: right" wrist-hud="hand:right" raycaster="objects: .clickable;"></a-entity>
        </a-entity>

    </a-scene>
</body>
</html>
