<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Scarlet VR Poker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <style>
    html, body { margin:0; padding:0; height:100%; background:#000; overflow:hidden; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; }
    #hud {
      position: fixed; left: 12px; top: 12px; z-index: 10;
      color: white; background: rgba(0,0,0,0.45);
      padding: 10px 12px; border-radius: 10px; max-width: 420px;
      line-height: 1.25; font-size: 14px; user-select: none;
    }
    #hud b { display:block; margin-bottom: 6px; }
    #log {
      position: fixed; left: 12px; right: 12px; bottom: 12px; z-index: 9999;
      max-height: 38vh; overflow:auto;
      background: rgba(0,0,0,0.75); color: #9ef;
      border: 1px solid rgba(255,255,255,0.15);
      padding: 10px; border-radius: 10px; font-size: 12px; white-space: pre-wrap;
    }
    canvas { display:block; }
  </style>
</head>
<body>

  <div id="hud">
    <b>Scarlet VR Poker</b>
    If you don’t see <b>ENTER VR</b>, we will show the exact error below.
    <div style="opacity:0.85; font-size:12px; margin-top:8px;">
      VR: left stick move • right stick snap turn • trigger teleport
    </div>
  </div>

  <div id="log">Booting…</div>

  <script>
    const logEl = document.getElementById('log');
    function log(msg) {
      logEl.textContent += "\n" + msg;
      logEl.scrollTop = logEl.scrollHeight;
    }

    window.addEventListener('error', (e) => {
      log("❌ window.error: " + (e.message || e.error || "unknown"));
      if (e.filename) log("   at " + e.filename + ":" + e.lineno + ":" + e.colno);
    });

    window.addEventListener('unhandledrejection', (e) => {
      log("❌ unhandledrejection: " + (e.reason?.message || e.reason || "unknown"));
    });

    // Preflight: verify main.js exists (this catches wrong URL/path instantly)
    fetch("./js/main.js", { cache: "no-store" })
      .then(r => {
        log("main.js fetch: " + r.status + " " + r.statusText);
        if (!r.ok) log("➡️ If this is 404, you are on the wrong URL or file path is wrong.");
      })
      .catch(err => log("main.js fetch failed: " + err.message));
  </script>

  <script type="module">
    import "./js/main.js";
    document.getElementById('log').textContent += "\n✅ main.js imported (module load success)";
  </script>

</body>
</html>
