<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Scarlett Poker VR</title>

  <!-- A-FRAME -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <!-- CORE SYSTEMS -->
  <script src="./core/table-game.js"></script>
  <script src="./core/economy.js"></script>
  <script src="./core/inventory.js"></script>

  <!-- UI SYSTEMS -->
  <script src="./ui/wrist-hud.js"></script>

  <!-- STYLES -->
  <link rel="stylesheet" href="./ui/style.css" />
</head>

<body>
  <a-scene
    vr-mode-ui="enabled: true"
    renderer="colorManagement: true; physicallyCorrectLights: true"
    background="color: #0b0b0b"
    table-game
    economy
    inventory
  >

    <!-- ASSETS -->
    <a-assets>
      <img id="felt" src="./assets/textures/felt.jpg">
    </a-assets>

    <!-- CAMERA / PLAYER -->
    <a-entity id="player"
      camera
      look-controls
      wasd-controls
      position="0 1.6 3">

      <!-- WRIST HUD -->
      <a-entity wrist-hud position="0 -0.2 -0.3"></a-entity>
    </a-entity>

    <!-- LIGHTING -->
    <a-entity light="type: ambient; intensity: 0.4"></a-entity>
    <a-entity light="type: point; intensity: 1; distance: 50"
              position="0 8 0"></a-entity>

    <!-- POKER TABLE -->
    <a-cylinder
      id="poker-table"
      radius="2.2"
      height="0.2"
      material="src: #felt"
      position="0 0.75 0">
    </a-cylinder>

    <!-- TABLE BASE -->
    <a-cylinder
      radius="2.4"
      height="0.3"
      color="#1a1a1a"
      position="0 0.5 0">
    </a-cylinder>

    <!-- SEATS -->
    <a-entity id="seats">
      <a-sphere radius="0.15" color="#333" position="0 0.9 -2.3"></a-sphere>
      <a-sphere radius="0.15" color="#333" position="2 0.9 -1"></a-sphere>
      <a-sphere radius="0.15" color="#333" position="2 0.9 1"></a-sphere>
      <a-sphere radius="0.15" color="#333" position="0 0.9 2.3"></a-sphere>
      <a-sphere radius="0.15" color="#333" position="-2 0.9 1"></a-sphere>
      <a-sphere radius="0.15" color="#333" position="-2 0.9 -1"></a-sphere>
    </a-entity>

    <!-- FLOOR -->
    <a-plane
      rotation="-90 0 0"
      width="30"
      height="30"
      color="#121212">
    </a-plane>

  </a-scene>

  <!-- AUTO SEAT + START GAME -->
  <script>
    window.addEventListener('load', () => {
      const scene = document.querySelector('a-scene');
      const table = scene.systems['table-game'];

      table.seatPlayer('PLAYER_1');
      table.addBot('BOT_A');
      table.addBot('BOT_B');
      table.addBot('BOT_C');

      setTimeout(() => {
        table.startHand();
      }, 1500);
    });
  </script>
</body>
</html>
