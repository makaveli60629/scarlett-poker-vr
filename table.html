<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Scarlett VR Poker - Table</title>

  <!-- A-Frame VR -->
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-physics-system@v4.2.2/dist/aframe-physics-system.min.js"></script>

  <!-- CSS -->
  <link rel="stylesheet" href="css/style.css">

  <!-- Firebase + Poker Engine -->
  <script type="module" src="js/firebase-config.js"></script>
  <script type="module" src="js/poker-engine.js"></script>
</head>
<body>
  <!-- Loading overlay -->
  <div id="overlay">
    <h1 class="title">SCARLETT VR POKER</h1>
    <p style="color: gold;">Table Room</p>
    <button class="btn" onclick="start()">Enter Table</button>
  </div>

  <!-- VR Scene -->
  <a-scene physics="debug: false" poker-engine>
    <!-- Sky -->
    <a-sky color="#020202"></a-sky>

    <!-- Floor -->
    <a-plane static-body rotation="-90 0 0" width="50" height="50" color="#080808" material="roughness: 0.1; metalness: 0.8"></a-plane>

    <!-- Poker Table -->
    <a-cylinder position="0 0 -5" radius="3.5" height="1.1" color="#1a110a" material="metalness:0.4"></a-cylinder>

    <!-- Community Cards (Middle of Table) -->
    <a-entity id="community-cards" position="0 1 0">
      <!-- Cards dynamically added via poker-engine.js -->
    </a-entity>

    <!-- Pot Display -->
    <a-text id="pot-text" value="TOTAL POT: $0" position="0 2.5 0" align="center" width="8" color="gold"></a-text>

    <!-- Betting Buttons -->
    <a-box class="bet-button clickable" data-amount="500" position="2 1.3 1" width="0.4" height="0.15" depth="0.3" color="gold">
      <a-text value="BET 500" align="center" rotation="-90 0 0" position="0 0.08 0" width="2.5" color="black"></a-text>
    </a-box>
    <a-box class="bet-button clickable" data-amount="1000" position="2 1.3 -1" width="0.4" height="0.15" depth="0.3" color="gold">
      <a-text value="BET 1000" align="center" rotation="-90 0 0" position="0 0.08 0" width="2.5" color="black"></a-text>
    </a-box>

    <!-- Player Hands (Face Down) -->
    <a-entity id="player-hand" position="0 1 -3">
      <!-- Cards dynamically added via poker-engine.js -->
    </a-entity>

    <!-- Chips -->
    <a-entity id="player-chips" position="0 1 -3.5">
      <a-text id="chip-count" value="Chips: 50000" align="center" width="3" color="gold"></a-text>
    </a-entity>

    <!-- Player Rig -->
    <a-entity id="rig" position="0 1.6 5" kinematic-body movement-controls="controls: touch, keyboard; speed:0.2">
      <a-camera look-controls="pointerLockEnabled: false">
        <a-cursor color="gold" raycaster="objects: .clickable"></a-cursor>
      </a-camera>

      <a-entity id="leftHand" oculus-touch-controls="hand: left">
        <a-box position="0 0.02 0.05" scale="0.12 0.04 0.15" color="#111">
          <a-plane position="0 0.51 0" rotation="-90 0 0" width="1.2" height="0.8" color="#000">
            <a-text id="wrist-cash" value="BANK: $50,000" position="0 0.1 0.01" align="center" width="2.5" color="gold"></a-text>
          </a-plane>
        </a-box>
      </a-entity>

      <a-entity id="rightHand" oculus-touch-controls="hand: right" laser-controls="hand: right" raycaster="objects: .clickable;"></a-entity>
    </a-entity>

    <!-- Lighting -->
    <a-light type="ambient" intensity="0.4"></a-light>
    <a-light type="point" position="0 10 -5" intensity="1.5" color="gold"></a-light>
  </a-scene>

  <script>
    function start() {
      document.getElementById('overlay').style.display = 'none';
      const scene = document.querySelector('a-scene');
      if (scene.audioListener) scene.audioListener.context.resume();
    }
  </script>
</body>
</html>
