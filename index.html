<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
  />
  <title>Scarlett VR Poker</title>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: #000;
      touch-action: none;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    canvas {
      position: fixed;
      inset: 0;
      z-index: 1;
    }

    /* ========= VR BUTTON: catch ALL variants =========
       - some builds use #VRButton
       - others add a button with text "ENTER VR"
       - some wrap it in a div
    */
    #VRButton,
    button#VRButton,
    .vr-button,
    button.vr-button,
    button[style*="bottom"],
    button[style*="right"] {
      position: fixed !important;
      right: 12px !important;
      bottom: 12px !important;
      z-index: 2147483647 !important;
      pointer-events: auto !important;
      display: block !important;
      visibility: visible !important;
      opacity: 1 !important;
      transform: none !important;
      max-width: 280px !important;
    }

    /* If the VR button is created WITHOUT an id, this helps */
    body > button {
      z-index: 2147483647;
    }

    /* Overlay cards */
    .overlay {
      position: fixed;
      top: 12px;
      left: 12px;
      right: 12px;
      z-index: 10;
      pointer-events: none;
    }

    .card {
      background: rgba(20, 20, 24, 0.75);
      border: 1px solid rgba(255, 255, 255, 0.12);
      border-radius: 16px;
      padding: 14px 16px;
      color: #fff;
      backdrop-filter: blur(10px);
    }

    .card h2 {
      margin: 0 0 8px 0;
      font-size: 20px;
      letter-spacing: 0.2px;
    }

    .card p {
      margin: 0;
      font-size: 14px;
      line-height: 1.35;
      color: rgba(255,255,255,0.9);
    }

    /* Debug panel: move it UP so it never sits on top of VR button area */
    .debug {
      position: fixed;
      left: 12px;
      right: 12px;
      bottom: 72px;            /* ðŸ‘ˆ IMPORTANT: leaves room for VR button */
      z-index: 20;
      pointer-events: none;
    }

    /* Optional: make debug look nicer */
    #debug {
      background: rgba(20, 20, 24, 0.65);
      border: 1px solid rgba(255, 255, 255, 0.12);
      border-radius: 16px;
      padding: 12px 14px;
      color: rgba(160, 255, 255, 0.95);
      font-size: 14px;
      white-space: pre-wrap;
    }
  </style>
</head>

<body>
  <div class="overlay">
    <div class="card">
      <h2>Scarlet VR Poker</h2>
      <p>
        Quest: tap <b>ENTER VR</b> (bottom-right).<br />
        Movement: Left stick. Snap turn: Right stick.<br />
        Teleport: Right trigger.
      </p>
    </div>
  </div>

  <div class="debug">
    <div id="debug"></div>
  </div>

  <script type="module" src="./js/main.js"></script>

  <!-- Extra safety: if THREE creates a VR button without id, tag it -->
  <script>
    // Runs after DOM changes; labels any top-level button that looks like a VR button.
    const tagVRButtons = () => {
      const btns = Array.from(document.querySelectorAll("button"));
      for (const b of btns) {
        const t = (b.textContent || "").toLowerCase();
        if (t.includes("enter vr") || t.includes("vr not supported") || t.includes("exit vr")) {
          b.classList.add("vr-button");
          if (!b.id) b.id = "VRButton";
        }
      }
    };
    new MutationObserver(tagVRButtons).observe(document.documentElement, { childList: true, subtree: true });
    tagVRButtons();
  </script>
</body>
</html>
