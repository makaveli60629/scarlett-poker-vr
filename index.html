<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Skylark Poker VR</title>
  <style>
    html, body { margin:0; padding:0; width:100%; height:100%; overflow:hidden; background:#000; }
    canvas { display:block; }
    #bootHud{
      position:fixed; left:12px; top:12px; z-index:99999; max-width:92vw;
      background:rgba(0,0,0,0.60); color:#fff; border:1px solid rgba(255,255,255,0.15);
      border-radius:14px; padding:12px; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
      backdrop-filter: blur(8px);
    }
    #bootHud .title{ font-weight:800; font-size:16px; margin-bottom:8px; }
    #bootHud .row{ display:flex; gap:10px; flex-wrap:wrap; margin-bottom:8px; }
    #bootHud .pill{ padding:6px 10px; border-radius:999px; border:1px solid rgba(255,255,255,0.15); background:rgba(255,255,255,0.06); font-weight:700; }
    #bootHud pre{ margin:0; white-space:pre-wrap; font-size:12px; line-height:1.25; max-height:40vh; overflow:auto; opacity:0.95; }
    #bootHud button{
      cursor:pointer; border-radius:12px; padding:10px 14px;
      border:1px solid rgba(255,255,255,0.15); background:rgba(255,255,255,0.06);
      color:#fff; font-weight:700;
    }
  </style>
</head>
<body>
  <div id="bootHud">
    <div class="title">Skylark Poker VR — Boot</div>
    <div class="row">
      <span id="bootOk" class="pill">⏳ Loading…</span>
      <span id="bootErr" class="pill">—</span>
    </div>
    <div class="row">
      <button id="reloadBtn">Reload + CacheBust</button>
    </div>
    <pre id="bootLog">If screen stays black, this panel will show the real error.</pre>
  </div>

  <script type="module">
    const ok = document.getElementById("bootOk");
    const err = document.getElementById("bootErr");
    const log = document.getElementById("bootLog");
    const reloadBtn = document.getElementById("reloadBtn");

    const cacheBust = Date.now();
    reloadBtn.onclick = () => location.href = location.pathname + "?v=" + Date.now();

    function setOK(text){ ok.textContent = text; }
    function setERR(text){ err.textContent = text; }
    function add(line){ log.textContent = (log.textContent + "\n" + line).trim(); }

    setOK("⏳ Importing main.js…");
    add("Tip: if cache acts weird, open with ?v=" + cacheBust);

    // IMPORTANT: dynamic import lets us catch errors and SHOW them
    import(`./js/main.js?v=${cacheBust}`)
      .then(() => {
        setOK("✅ main.js loaded");
        setERR("✅ OK");
        add("main.js import succeeded.");
        // Optional: hide boot panel once running
        // document.getElementById("bootHud").style.display = "none";
      })
      .catch((e) => {
        setOK("⚠️ main.js failed");
        setERR("❌ ERROR");
        add("IMPORT FAILED:");
        add(String(e?.stack || e));
        console.error(e);
      });
  </script>
</body>
  </html>
