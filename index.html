<!DOCTYPE html>
<html lang="en">
<head>
    <title>Scarlett VR Poker - Fixed Build</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-particle-system-component@1.0.x/dist/aframe-particle-system-component.min.js"></script>
</head>
<body>

    <a-scene renderer="colorManagement: true;">
        <a-assets timeout="7000">
            <img id="brickWall" src="assets/textures/1767151860440~2.jpg">
            <img id="cardSkins" src="assets/textures/1767151685907.jpg">
            <img id="mainLogo" src="assets/textures/1767153958433.jpg">
            <img id="dailyClaimUI" src="assets/textures/1767154515372.jpg">
            <img id="neonCarpet" src="assets/textures/1767154747836.jpg">
        </a-assets>

        <a-sky color="#0a0a0a"></a-sky>
        <a-plane position="0 0 0" rotation="-90 0 0" width="50" height="50" src="#neonCarpet" material="repeat: 10 10; roughness: 1;"></a-plane>

        <a-box position="0 2 -8" width="16" height="4" depth="0.5" src="#brickWall" material="color: #444;"></a-box>
        <a-box position="-8 2 0" rotation="0 90 0" width="16" height="4" depth="0.5" src="#brickWall"></a-box>
        <a-box position="8 2 0" rotation="0 90 0" width="16" height="4" depth="0.5" src="#brickWall"></a-box>

        <a-entity position="0 0.05 -4">
            <a-ring rotation="-90 0 0" radius-inner="1" radius-outer="1.3" src="#neonCarpet" animation="property: rotation; to: -90 0 360; loop: true; dur: 8000;"></a-ring>
            <a-entity particle-system="preset: dust; color: #00FFFF,#FF00FF; particleCount: 200; size: 1.5; velocityValue: 0 1.5 0;"></a-entity>
        </a-entity>

        <a-entity id="pokerTable" position="5 0 -4">
            <a-cylinder radius="1.8" height="0.9" src="#brickWall"></a-cylinder> <a-cylinder position="0 0.91 0" radius="1.8" height="0.1" src="#neonCarpet">
                <a-image src="#mainLogo" position="0 0.06 0" rotation="-90 0 0" width="1.5" height="1.5"></a-image>
            </a-cylinder>
        </a-entity>

        <a-box id="backDoor" position="0 1.5 7.8" width="3" height="3" depth="0.2" color="#222" src="#brickWall"
               animation__open="property: position; to: 3 1.5 7.8; dur: 2000; startEvents: click"></a-box>

        <a-entity id="rig" position="0 0 2">
            <a-camera id="camera" look-controls></a-camera>
            <a-entity oculus-touch-controls="hand: left"></a-entity>
            <a-entity oculus-touch-controls="hand: right" laser-controls raycaster="objects: #backDoor"></a-entity>
        </a-entity>

    </a-scene>

    <script>
        // LOGIC: Auto-Seat Trigger
        setInterval(() => {
            const userPos = document.querySelector('#camera').object3D.position;
            const portalPos = {x: 0, y: 0, z: -4};
            
            // If user walks into Poodle Portal
            if (Math.abs(userPos.x - portalPos.x) < 1 && Math.abs(userPos.z - portalPos.z) < 1) {
                document.querySelector('#rig').setAttribute('position', '5 0 -2.5'); // Snap to table
                console.log("Auto-Seated at Scarlett Table");
            }
        }, 1000);
    </script>
</body>
</html>
