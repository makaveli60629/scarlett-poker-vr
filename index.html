<!DOCTYPE html>
<html>
  <head>
    <title>VR Poker Hub - Index</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    
    <style>
      #loading-screen {
        position: fixed;
        top: 0; left: 0; width: 100%; height: 100%;
        background: #000033; /* Dark Blue */
        color: cyan;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: sans-serif;
      }
    </style>
  </head>
  <body>

    <div id="loading-screen">
      <h1>VR POKER HUB INDEX</h1>
      <p id="status">Loading Brick Rooms & Branded Tables...</p>
      <button onclick="forceStart()" style="margin-top:20px; padding:10px; cursor:pointer;">FORCE START</button>
    </div>

    <a-scene shadow="type: pcfsoft">
      
      <a-assets timeout="10000">
        <img id="brick-wall" src="assets/textures/brick_wall.jpg">
        <img id="table-felt" src="assets/textures/poker_branding.png">
        <img id="card-front" src="assets/textures/real_card_skin.jpg">
        <a-asset-item id="card-model" src="assets/models/low_poly_card.obj"></a-asset-item>
      </a-assets>

      <a-box position="0 2 -5" width="10" height="4" depth="0.2" src="#brick-wall" repeat="4 2"></a-box>
      <a-ring color="cyan" position="0 0.1 -3" rotation="-90 0 0" radius-inner="1" radius-outer="1.1" emissive="cyan"></a-ring>
      
      <a-entity id="room-1" position="-8 0 -10">
        <a-box width="8" height="4" depth="8" src="#brick-wall" material="side: back"></a-box>
        <a-cylinder position="0 0.8 0" radius="1.5" height="0.1" src="#table-felt">
            <a-text value="PLAY GAME" align="center" position="0 0.1 0" rotation="-90 0 0" color="yellow" width="3"></a-text>
        </a-cylinder>
      </a-entity>

      <a-entity id="room-2" position="0 0 -15">
        <a-box width="8" height="4" depth="8" src="#brick-wall" material="side: back"></a-box>
      </a-entity>

      <a-entity id="room-3" position="8 0 -10">
        <a-box width="8" height="4" depth="8" src="#brick-wall" material="side: back"></a-box>
      </a-entity>

      <a-box id="back-door" position="0 1.5 5" width="3" height="3" depth="0.2" color="#222" animation="property: position; to: 3 1.5 5; startEvents: click"></a-box>

      <a-entity id="rig" movement-controls="controls: checkpoint, locomotion" checkpoint-controls="mode: animate">
        <a-entity camera position="0 1.6 0" look-controls></a-entity>
        
        <a-entity oculus-touch-controls="hand: left" laser-controls="hand: left"></a-entity>
        
        <a-entity oculus-touch-controls="hand: right" laser-controls="hand: right"></a-entity>
      </a-entity>

    </a-scene>

    <script>
      // Force start if assets take too long
      function forceStart() {
        document.getElementById('loading-screen').style.display = 'none';
        console.log("Forced Entry: Blue Daily Giveaway Logic Initialized.");
      }

      // Blue Daily Giveaway Logic
      window.addEventListener('abuttondown', function() {
          alert("Claiming Blue Daily Chips!");
      });

      // Auto-Sit Logic
      document.querySelector('a-scene').addEventListener('enter-vr', function () {
          console.log("VR Active. Auto-Sit Logic Ready.");
      });

      // Detect movement to "Play Game"
      setInterval(() => {
        let playerPos = document.querySelector('#rig').getAttribute('position');
        if (playerPos.x < -7 && playerPos.z < -9) {
            // Logic for Sitting Down and Getting Cards
            console.log("User at table. Dealing cards...");
        }
      }, 1000);

      // Automatic Loading Clear
      window.onload = () => {
        setTimeout(forceStart, 3000); // Clears the blue after 3 seconds automatically
      };
    </script>
  </body>
</html>
