<script type="module">
  const jsPill = document.getElementById("jsPill");
  const logEl = document.getElementById("log");
  const log = (line) => {
    logEl.textContent += (logEl.textContent ? "\n" : "") + line;
  };

  try {
    const mod = await import("./js/main.js?v=" + Date.now());

    // CALL BOOT EXACTLY ONCE
    await mod.boot();

    jsPill.classList.remove("bad");
    jsPill.classList.add("ok");
    jsPill.textContent = "✅ boot() ok";
    log("boot() finished");
  } catch (err) {
    jsPill.classList.remove("ok");
    jsPill.classList.add("bad");
    jsPill.textContent = "❌ IMPORT FAILED";
    log("IMPORT ERROR:");
    log(String(err?.stack || err));
    throw err;
  }
</script>
