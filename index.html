<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>Scarlett Poker VR</title>
  <style>
    html, body { margin:0; padding:0; height:100%; background:#05060a; overflow:hidden; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; }
    #app { position:fixed; inset:0; }
    canvas { display:block; width:100%; height:100%; }

    /* HUD */
    #hud {
      position:fixed; left:0; right:0; top:0;
      display:flex; gap:10px; align-items:center; justify-content:space-between;
      padding:10px;
      pointer-events:none;
    }
    .pill {
      pointer-events:auto;
      background:rgba(0,0,0,.55);
      color:#fff;
      border:1px solid rgba(255,255,255,.15);
      border-radius:999px;
      padding:8px 12px;
      font-size:13px;
      display:flex; gap:10px; align-items:center;
      backdrop-filter: blur(8px);
    }
    .btn {
      cursor:pointer;
      background:rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.18);
      color:#fff;
      border-radius:10px;
      padding:8px 10px;
      font-size:13px;
    }
    .btn:active { transform: translateY(1px); }

    /* Debug panel */
    #debug {
      position:fixed; left:10px; top:60px; width:min(520px, calc(100vw - 20px));
      max-height:55vh;
      background:rgba(0,0,0,.70);
      border:1px solid rgba(255,255,255,.15);
      border-radius:14px;
      color:#fff;
      padding:10px;
      display:none;
      overflow:hidden;
      backdrop-filter: blur(8px);
      z-index:10;
    }
    #debugHeader { display:flex; justify-content:space-between; gap:10px; align-items:center; }
    #debugBody { margin-top:8px; font-size:12px; line-height:1.3; }
    #log {
      margin-top:8px;
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      border-radius:10px;
      padding:8px;
      height:26vh;
      overflow:auto;
      white-space:pre-wrap;
      word-break:break-word;
    }
    .row { display:flex; flex-wrap:wrap; gap:8px; align-items:center; }

    /* Mobile controls */
    #touch {
      position:fixed; left:0; right:0; bottom:0;
      padding:10px;
      display:none; /* auto-enabled on touch devices */
      justify-content:space-between;
      align-items:flex-end;
      gap:10px;
      pointer-events:none;
      z-index:9;
    }
    .pad {
      pointer-events:auto;
      width:160px; height:160px;
      border-radius:18px;
      background:rgba(0,0,0,.40);
      border:1px solid rgba(255,255,255,.15);
      display:flex; align-items:center; justify-content:center;
      position:relative;
      touch-action:none;
      backdrop-filter: blur(8px);
    }
    .stick {
      width:56px; height:56px;
      border-radius:999px;
      background:rgba(255,255,255,.18);
      border:1px solid rgba(255,255,255,.25);
      position:absolute;
      left:50%; top:50%;
      transform:translate(-50%,-50%);
    }
    .actionCol {
      pointer-events:auto;
      display:flex;
      flex-direction:column;
      gap:10px;
      align-items:flex-end;
    }
    .bigBtn {
      pointer-events:auto;
      width:140px;
      padding:14px 12px;
      border-radius:16px;
      font-size:15px;
      font-weight:700;
      background:rgba(255,255,255,.14);
      border:1px solid rgba(255,255,255,.22);
      color:#fff;
      touch-action:none;
    }
    .smallBtn { width:140px; }
  </style>
</head>

<body>
  <div id="app"></div>

  <div id="hud">
    <div class="pill">
      <strong>Scarlett Poker VR</strong>
      <span id="status">bootingâ€¦</span>
    </div>

    <div class="pill row">
      <button class="btn" id="btnEnterVR">Enter VR</button>
      <button class="btn" id="btnDebug">Debug</button>
      <button class="btn" id="btnReset">Reset</button>
    </div>
  </div>

  <div id="debug">
    <div id="debugHeader">
      <div class="row">
        <strong>Diagnostics</strong>
        <span id="meta"></span>
      </div>
      <div class="row">
        <button class="btn" id="btnCopyLog">Copy Log</button>
        <button class="btn" id="btnCloseDebug">Close</button>
      </div>
    </div>
    <div id="debugBody">
      <div class="row" id="flags"></div>
      <div id="log"></div>
    </div>
  </div>

  <div id="touch">
    <div class="pad" id="padMove"><div class="stick" id="stickMove"></div></div>

    <div class="actionCol">
      <button class="bigBtn" id="btnAction">ACTION (Grip)</button>
      <button class="bigBtn smallBtn" id="btnJump">JUMP / UP</button>
    </div>

    <div class="pad" id="padTurn"><div class="stick" id="stickTurn"></div></div>
  </div>

  <script type="module">
    import { boot } from "./js/main.js";
    boot({
      appEl: document.getElementById("app"),
      ui: {
        statusEl: document.getElementById("status"),
        debugEl: document.getElementById("debug"),
        logEl: document.getElementById("log"),
        metaEl: document.getElementById("meta"),
        flagsEl: document.getElementById("flags"),
        btnEnterVR: document.getElementById("btnEnterVR"),
        btnDebug: document.getElementById("btnDebug"),
        btnReset: document.getElementById("btnReset"),
        btnCopyLog: document.getElementById("btnCopyLog"),
        btnCloseDebug: document.getElementById("btnCloseDebug"),
        touchRoot: document.getElementById("touch"),
        padMove: document.getElementById("padMove"),
        stickMove: document.getElementById("stickMove"),
        padTurn: document.getElementById("padTurn"),
        stickTurn: document.getElementById("stickTurn"),
        btnAction: document.getElementById("btnAction"),
        btnJump: document.getElementById("btnJump"),
      }
    });
  </script>
</body>
</html>
