<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Brick Club VR - Modular Master</title>
    <style>
        body { margin: 0; background: #000; overflow: hidden; font-family: sans-serif; }
        #overlay {
            position: absolute; width: 100%; height: 100%; display: flex;
            flex-direction: column; justify-content: center; align-items: center;
            background: #000; z-index: 100; color: #ffd700;
        }
        button {
            padding: 20px 60px; font-size: 24px; background: #8B0000;
            color: white; border: 3px solid #ffd700; border-radius: 50px; cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="overlay">
        <h1>BRICK CLUB VR</h1>
        <button id="start-btn">ENTER CLUB (VR)</button>
    </div>

    <script type="module">
        import * as THREE from 'https://cdn.skypack.dev/three@0.136.0';
        import { VRButton } from 'https://cdn.skypack.dev/three@0.136.0/examples/jsm/webxr/VRButton.js';
        
        // --- CATEGORY CONNECTORS ---
        import { initEngine, userRig } from './core/engine.js';
        import { buildLobby } from './world/lobby.js';
        import { setupOculus, updateLocomotion } from './core/controls.js';

        let scene, camera, renderer;

        async function start() {
            // Initialize the "Heart"
            const engine = initEngine();
            scene = engine.scene;
            camera = engine.camera;
            renderer = engine.renderer;

            // Initialize the "World" (Brick Walls, Red Carpet)
            buildLobby(scene);

            // Initialize the "Input" (Oculus Remotes)
            setupOculus(renderer, scene, userRig);

            // Start the Loop
            renderer.setAnimationLoop(() => {
                updateLocomotion(renderer, userRig);
                renderer.render(scene, camera);
            });
        }

        document.getElementById('start-btn').onclick = () => {
            document.getElementById('overlay').style.display = 'none';
            start();
        };
    </script>
</body>
</html>
