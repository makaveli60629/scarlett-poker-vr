<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SCORIPON ELITE - MASTER 1.4.8</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-blink-controls/dist/aframe-blink-controls.min.js"></script>
    
    <script>
        // PURPLE GRADIENT SHADER
        AFRAME.registerShader('purple-gradient', {
            vertexShader: `varying vec2 vUv; void main() { vUv = uv; gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0); }`,
            fragmentShader: `varying vec2 vUv; void main() { vec3 c1 = vec3(0.3, 0.0, 0.5); vec3 c2 = vec3(0.7, 0.3, 1.0); gl_FragColor = vec4(mix(c1, c2, vUv.y), 1.0); }`
        });

        // MASTER LOGIC
        AFRAME.registerComponent('poker-master', {
            init: function () {
                this.balance = 5000;
                this.rank = "SCORIPON ELITE";
                this.playerEl = document.querySelector('#player');
                this.watchText = document.querySelector('#watch-stats');
                this.boardText = document.querySelector('#leaderboard-text');
                this.playerEl.setAttribute('position', "0 0 5"); 
                setInterval(() => {
                    const now = new Date();
                    const time = now.getHours() + ":" + now.getMinutes().toString().padStart(2, '0');
                    if(this.watchText) this.watchText.setAttribute('value', `${time}\n$${this.balance}\n${this.rank}`);
                    if(this.boardText) this.boardText.setAttribute('value', `SCORIPON ELITE\nBANK: $${this.balance}`);
                }, 1000);
            },
            sitPlayer: function() {
                this.playerEl.setAttribute('position', "0 0.6 -1.5");
            }
        });
    </script>
</head>
<body>
    <a-scene poker-master renderer="antialias: true; colorManagement: true;" loading-screen="enabled: false">
        
        <a-assets>
            <img id="tex-card-back" src="assets/textures/Card back.jpg">
            <img id="tex-art" src="assets/textures/Casinoart2.jpg">
            <img id="tex-floor" src="assets/textures/Marblegold floors.jpg">
            <img id="tex-brand" src="assets/textures/Scoripon room brand.jpg">
            <img id="tex-trim" src="assets/textures/Table leather trim.jpg">
            <img id="tex-glow" src="assets/textures/Teleport glow.jpg">
            <img id="tex-winner" src="assets/textures/Winner.jpg">
        </a-assets>

        <a-sky color="#87CEEB"></a-sky> 
        <a-light type="ambient" intensity="1.8"></a-light>
        <a-light type="point" position="0 10 0" intensity="1.5"></a-light>

        <a-entity id="player">
            <a-camera><a-cursor color="red"></a-cursor></a-camera>
            <a-entity id="leftHand" hand-tracking-controls="hand: left; modelColor: #e0ac69;" oculus-touch-controls="hand: left"
                      blink-controls="cameraRig: #player; teleportOrigin: #cam; snapImage: #tex-glow;">
                <a-entity id="watch" position="0 0.06 0.1" rotation="-90 0 0">
                    <a-box width="0.1" height="0.12" depth="0.02" color="#111">
                        <a-text id="watch-stats" color="#0FF" scale="0.12 0.12 0.12" align="center"></a-text>
                        <a-circle radius="0.02" color="white" position="0 -0.04 0.012"></a-circle>
                    </a-box>
                </a-entity>
            </a-entity>
            <a-entity id="rightHand" hand-tracking-controls="hand: right; modelColor: #e0ac69;" oculus-touch-controls="hand: right"></a-entity>
        </a-entity>

        <a-plane class="nav-mesh" position="0 0.01 0" rotation="-90 0 0" width="50" height="50" src="#tex-floor" repeat="10 10" color="#ccc"></a-plane>
        
        <a-entity id="walls">
            <a-box position="0 4.5 -18" width="36" height="9" src="#tex-brand" color="#444">
                <a-box position="0 4.4 0.2" width="36" height="0.2" material="shader: purple-gradient;"></a-box>
                <a-box position="0 -4.4 0.2" width="36" height="0.2" material="shader: purple-gradient;"></a-box>
                <a-plane position="0 0.5 0.3" width="5" height="3.5" src="#tex-art" color="#666"></a-plane>
            </a-box>
            <a-box position="0 4.5 18" width="36" height="9" src="#tex-brand" color="#444"></a-box>
            <a-box position="-18 4.5 0" rotation="0 90 0" width="36" height="9" src="#tex-brand" color="#444"></a-box>
            <a-box position="18 4.5 0" rotation="0 -90 0" width="36" height="9" src="#tex-brand" color="#444"></a-box>

            <a-box position="-17.8 4.5 -17.8" width="1" height="9" depth="1" material="shader: purple-gradient;"></a-box>
            <a-box position="17.8 4.5 -17.8" width="1" height="9" depth="1" material="shader: purple-gradient;"></a-box>
            <a-box position="-17.8 4.5 17.8" width="1" height="9" depth="1" material="shader: purple-gradient;"></a-box>
            <a-box position="17.8 4.5 17.8" width="1" height="9" depth="1" material="shader: purple-gradient;"></a-box>
        </a-entity>

        <a-entity id="poker-table" position="0 0.7 -4">
            <a-cylinder radius="1.8" height="0.1" color="#076324"></a-cylinder>
            <a-torus radius="1.85" radius-tubular="0.1" rotation="90 0 0" src="#tex-trim" color="#222"></a-torus>
            <a-box position="0 0.5 2.2" width="1" height="0.3" depth="0.5" color="#FFD700" onclick="document.querySelector('[poker-master]').components['poker-master'].sitPlayer()">
                <a-text value="SIT" align="center" position="0 0.2 0" color="black"></a-text>
            </a-box>
        </a-entity>

        <a-entity position="0 10 -15" rotation="20 0 0">
            <a-text id="leaderboard-text" align="center" color="#FFD700" scale="4 4 4"></a-text>
        </a-entity>

    </a-scene>
</body>
</html>
