<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Skylark Poker VR</title>
  <style>
    html, body { margin:0; padding:0; width:100%; height:100%; overflow:hidden; background:#000; color:#fff; font-family:system-ui, Arial; }
    #hud {
      position: fixed; left: 12px; top: 12px; z-index: 10;
      background: rgba(0,0,0,.55); border:1px solid rgba(255,255,255,.18);
      padding: 10px 12px; border-radius: 12px; max-width: 92vw; line-height: 1.35;
    }
    #err {
      position: fixed; left: 12px; bottom: 12px; right: 12px; z-index: 10;
      background: rgba(120,0,0,.72); border:1px solid rgba(255,255,255,.22);
      padding: 10px 12px; border-radius: 12px; display:none; white-space: pre-wrap;
    }
  </style>

  <!-- IMPORTANT: Import map so all your JS files can safely do: import * as THREE from "three"; -->
  <script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
    }
  }
  </script>
</head>

<body>
  <div id="hud">
    <div><b>Skylark Poker VR</b> — If you see this, HTML loaded ✅</div>
    <div id="status">Status: loading…</div>
    <div style="opacity:.75; font-size: 12px; margin-top:6px;">
      Tip: If you changed code and still see old behavior, hard refresh on Android and Quest Browser.
    </div>
  </div>
  <div id="err"></div>

  <script type="module">
    const statusEl = document.getElementById("status");
    const errEl = document.getElementById("err");

    function showErr(msg) {
      errEl.style.display = "block";
      errEl.textContent = msg;
    }

    statusEl.textContent = "Status: importing js/main.js…";

    try {
      const mod = await import("./js/main.js");
      if (!mod || typeof mod.boot !== "function") {
        throw new Error("main.js loaded but it does NOT export boot().");
      }
      statusEl.textContent = "Status: main.js imported ✅ booting…";
      await mod.boot(statusEl);
      statusEl.textContent = "Status: running ✅ (VR button should appear)";
    } catch (e) {
      statusEl.textContent = "Status: IMPORT FAILED ❌";
      showErr(String(e && (e.stack || e.message || e)));
      console.error(e);
    }
  </script>
</body>
</html>
