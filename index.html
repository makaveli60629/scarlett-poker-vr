<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poker VR 1.3.3 - Polished Build</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.2/dist/aframe-environment-component.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-blink-controls/dist/aframe-blink-controls.min.js"></script>

    <style>
        body { margin: 0; overflow: hidden; background-color: #000; }
        #loading-gate {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, #222, #000); display: flex; flex-direction: column; 
            align-items: center; justify-content: center; z-index: 10000; color: white; font-family: sans-serif;
        }
        .btn { padding: 20px 50px; font-size: 1.2rem; background: #00d2ff; border: none; cursor: pointer; font-weight: bold; border-radius: 30px; margin-top: 20px; box-shadow: 0 0 15px #00d2ff; }
    </style>
</head>
<body>

    <div id="loading-gate">
        <img src="assets/textures/brand_logo.jpg" style="width:180px" onerror="this.src='https://i.imgur.com/S8WvO7s.png'">
        <button class="btn" onclick="this.parentElement.style.display='none'">START GAME</button>
    </div>

    <a-scene renderer="antialias: true; colorManagement: true;" loading-screen="enabled: false">
        
        <a-assets timeout="8000">
            <img id="brick-tex" src="assets/textures/brickwall.jpg">
            <img id="logo-tex" src="assets/textures/brand_logo.jpg">
            <img id="carpet-tex" src="assets/textures/lobby_carpet.jpg">
            <img id="casino-art" src="assets/textures/casino_art.jpg">
            <img id="daily-tex" src="assets/textures/dailyclaim.jpg">
            <img id="table-atlas" src="assets/textures/table_atlas.jpg">
        </a-assets>

        <a-entity environment="preset: starry; ground: canyon; skyType: atmosphere; skyColor: #000; stars: true"></a-entity>

        <a-entity id="rig" position="0 0 5">
            <a-camera id="camera" look-controls>
                <a-entity id="main-menu" position="0 0 -1" visible="false">
                    <a-plane width="0.8" height="0.6" material="color: #111; shader: flat; opacity: 0.9" side="double">
                        <a-text value="MAIN MENU" align="center" position="0 0.22 0.01" width="2" color="#00d2ff"></a-text>
                        
                        <a-gui-button class="clickable" position="0 0.05 0.02" width="0.5" height="0.1" onclick="teleportTo('0 0 5')">
                            <a-box width="0.6" height="0.1" depth="0.02" color="#333">
                                <a-text value="GOTO LOBBY" align="center" scale="0.3 0.3 0.3" color="white"></a-text>
                            </a-box>
                        </a-gui-button>

                        <a-gui-button class="clickable" position="0 -0.15 0.02" width="0.5" height="0.1" onclick="location.reload()">
                            <a-box width="0.6" height="0.1" depth="0.02" color="#ff4444">
                                <a-text value="EXIT GAME" align="center" scale="0.3 0.3 0.3" color="white"></a-text>
                            </a-box>
                        </a-gui-button>
                    </a-plane>
                </a-entity>
            </a-camera>

            <a-entity id="left-con" oculus-touch-controls="hand: left" 
                      blink-controls="cameraRig: #rig; teleportOrigin: #camera; collisionEntities: .nav-floor; button: trigger">
            </a-entity>
            <a-entity id="right-con" oculus-touch-controls="hand: right" laser-controls="hand: right" raycaster="objects: .clickable; far: 10"></a-entity>
        </a-entity>

        <a-plane id="floor" class="nav-floor" rotation="-90 0 0" width="100" height="100" visible="false"></a-plane>

        <a-entity id="lobby-room">
            <a-plane position="0 0.01 0" rotation="-90 0 0" width="15" height="15" src="#carpet-tex"></a-plane>
            
            <a-box position="0 2.5 -7.5" width="15" height="5" depth="0.2" src="#brick-tex" static-body></a-box>
            <a-box position="0 2.5 7.5" width="15" height="5" depth="0.2" src="#brick-tex" static-body></a-box>
            <a-box position="7.5 2.5 0" rotation="0 90 0" width="15" height="5" depth="0.2" src="#brick-tex" static-body></a-box>
            <a-box position="-7.5 2.5 0" rotation="0 90 0" width="15" height="5" depth="0.2" src="#brick-tex" static-body></a-box>

            <a-entity position="0 3.5 -7.3">
                <a-light type="point" intensity="0.8" distance="10" color="#fff"></a-light>
                <a-box width="0.2" height="0.4" depth="0.1" color="gold"></a-box>
            </a-entity>

            <a-entity position="0 1.2 -4" animation="property: position; dir: alternate; dur: 2000; loop: true; to: 0 1.4 -4">
                <a-cylinder id="daily-box" class="clickable" radius="0.8" height="0.1" src="#daily-tex" onclick="claimDaily()">
                    <a-text value="CLICK TO CLAIM" align="center" position="0 0.6 0" color="gold" width="4"></a-text>
                </a-cylinder>
            </a-entity>
        </a-entity>

        <a-entity id="store-room" position="15 0 0">
            <a-box position="0 2.5 -5" width="10" height="5" depth="0.2" src="#brick-tex"></a-box>
            <a-box position="5 2.5 0" rotation="0 90 0" width="10" height="5" depth="0.2" src="#brick-tex"></a-box>
            <a-text value="CHIP STORE" align="center" position="0 3 0" width="6"></a-text>
            <a-box class="clickable" position="0 1 0" width="1" height="1" depth="1" color="#222" onclick="buyChips()">
                <a-text value="BUY $5000" align="center" position="0 0.6 0.51" width="3"></a-text>
            </a-box>
        </a-entity>

        <a-entity id="scorpion-room" position="-15 0 -15">
            <a-box position="0 2.5 -5" width="10" height="5" depth="0.2" src="#brick-tex"></a-box>
            <a-plane src="#logo-tex" position="0 2.5 -4.8" width="1.5" height="1.5"></a-plane>
            
            <a-entity position="0 0.8 0" class="clickable" onclick="autoSit()">
                <a-cylinder radius="2" height="0.1" src="#table-atlas" repeat="0.33 1"></a-cylinder>
                <a-text value="PLAY SCORPION" align="center" position="0 1.2 0"></a-text>
            </a-entity>
        </a-entity>

        <a-entity position="5 2 0" rotation="0 -45 0">
            <a-text id="wallet-txt" value="WALLET: $1000" align="center" color="#00FF00" width="5"></a-text>
        </a-entity>

    </a-scene>

    <script>
        let wallet = 1000;
        let menuVisible = false;

        document.querySelector('#left-con').addEventListener('ybuttondown', () => {
            menuVisible = !menuVisible;
            document.getElementById('main-menu').setAttribute('visible', menuVisible);
        });

        function claimDaily() {
            let win = (Math.floor(Math.random() * 10) + 1) * 500;
            wallet += win;
            updateUI();
            alert("Daily Pick: You got $" + win + "!");
        }

        function buyChips() {
            wallet += 5000;
            updateUI();
        }

        function updateUI() {
            document.getElementById('wallet-txt').setAttribute('value', 'WALLET: $' + wallet);
        }

        function teleportTo(coords) {
            document.getElementById('rig').setAttribute('position', coords);
            document.getElementById('main-menu').setAttribute('visible', false);
            menuVisible = false;
        }

        function autoSit() {
            document.getElementById('rig').setAttribute('position', '-15 0 -14');
        }
    </script>
</body>
</html>
