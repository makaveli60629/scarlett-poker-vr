<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
  <title>ScarlettVR Poker — FULL STABLE</title>

  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <style>
    body { margin:0; background:#0b1420; font-family:system-ui; overflow:hidden; }
    #hud { position:fixed; top:10px; left:10px; right:10px; z-index:10; }
    .hudRow { display:flex; gap:10px; margin-bottom:8px; flex-wrap:wrap; }
    .hudBtn {
      background:linear-gradient(180deg,#1b2a3f,#0f1a2a);
      color:#eaf2ff; border:1px solid rgba(255,255,255,.2);
      border-radius:14px; padding:10px 16px; font-size:14px;
    }
    #diagPanel {
      background:rgba(0,0,0,.75);
      color:#eaf2ff; padding:12px;
      border-radius:14px; font-family:monospace;
      white-space:pre-wrap; max-height:45vh; overflow:auto;
    }
  </style>
</head>

<body>

<div id="hud">
  <div class="hudRow">
    <button class="hudBtn" onclick="enterVR()">Enter VR</button>
    <button class="hudBtn" onclick="resetSpawn()">Reset to Spawn</button>
  </div>
  <div id="diagPanel"></div>
</div>

<a-scene
  embedded
  renderer="antialias:true; physicallyCorrectLights:true"
  webxr="optionalFeatures: local-floor, bounded-floor"
  background="color:#0b1420"
>

  <!-- PLAYER RIG (CORRECT + SAFE) -->
  <a-entity id="rig" position="0 0 18" rotation="0 180 0">
    <a-entity
      id="camera"
      camera
      position="0 1.6 0"
      look-controls
      wasd-controls="acceleration:18">
    </a-entity>
  </a-entity>

  <!-- WORLD ROOT -->
  <a-entity id="world"></a-entity>

  <!-- LIGHTING (BRIGHT ON ANDROID) -->
  <a-entity light="type:ambient; intensity:1.4"></a-entity>
  <a-entity light="type:hemisphere; intensity:1.1; color:#ffffff; groundColor:#0a1018"></a-entity>
  <a-entity light="type:directional; intensity:1.6" position="5 10 6"></a-entity>
  <a-entity light="type:directional; intensity:1.2" position="-6 8 -5"></a-entity>

</a-scene>

<script>
const diag = document.getElementById("diagPanel");
function log(t){ diag.textContent += t + "\n"; }

log("[boot] starting…");

function enterVR(){
  const scene = document.querySelector("a-scene");
  scene.enterVR();
  log("[vr] enter requested");
}

function resetSpawn(){
  const rig = document.getElementById("rig");
  rig.setAttribute("position","0 0 18");
  rig.setAttribute("rotation","0 180 0");
  log("[spawn] reset");
}
</script>

<script src="./js/world.js"></script>

</body>
</html>
