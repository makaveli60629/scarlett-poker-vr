<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>SCARLETT ESTATE: TITAN ELITE</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-physics-system@v4.2.2/dist/aframe-physics-system.min.js"></script>
    <style>
        body { background: #000; margin: 0; overflow: hidden; }
        #overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, #1a1a1a, #000);
            display: flex; flex-direction: column; justify-content: center;
            align-items: center; z-index: 10000; border: 15px solid #d4af37;
        }
        .title { color: gold; font-family: serif; font-size: 3.5rem; text-shadow: 0 0 20px gold; margin: 0; letter-spacing: 8px; text-align: center; }
        .btn { margin-top: 40px; padding: 20px 80px; background: gold; color: black; font-weight: bold; font-size: 1.5rem; border: none; cursor: pointer; border-radius: 50px; box-shadow: 0 0 30px gold; }
    </style>

    <script>
        function start() {
            document.getElementById('overlay').style.display = 'none';
            // Resume audio context to fix sound issues in browsers
            const scene = document.querySelector('a-scene');
            if (scene.audioListener) scene.audioListener.context.resume();
        }

        // Logic for the Betting System
        AFRAME.registerComponent('poker-engine', {
            init: function() {
                this.pot = 0;
                this.el.addEventListener('bet', (e) => {
                    this.pot += e.detail.amount;
                    document.querySelector('#pot-text').setAttribute('value', "TOTAL POT: $" + this.pot);
                    // Update Wrist HUD
                    document.querySelector('#wrist-cash').setAttribute('value', "BANK: $" + (50000 - this.pot));
                });
            }
        });
    </script>
</head>
<body>

    <div id="overlay">
        <h1 class="title">SCARLETT ESTATE</h1>
        <p style="color: gold; letter-spacing: 4px;">PRIVATE POKER VAULT</p>
        <button class="btn" onclick="start()">INITIALIZE VR</button>
    </div>

    <a-scene poker-engine physics="debug: false">
        <a-assets>
            <a-asset-item id="statue-glb" src="https://cdn.readyplayer.me/64b54e0b0e5132204a9e530a.glb"></a-asset-item>
        </a-assets>

        <a-sky color="#020202"></a-sky>
        <a-entity position="0 5 -5" particle-system="preset: dust; color: #d4af37; particleCount: 1000; size: 0.1"></a-entity>

        <a-plane static-body rotation="-90 0 0" width="100" height="100" color="#080808" material="roughness: 0.1; metalness: 0.8"></a-plane>

        <a-entity position="0 0 8">
            <a-torus radius="4" radius-tubular="0.05" arc="180" rotation="0 0 0" color="gold" material="emissive: gold; emissiveIntensity: 2"></a-torus>
            <a-light type="rectLight" color="gold" intensity="2" position="0 2 0"></a-light>
        </a-entity>

        <a-entity position="0 0 -5">
            <a-cylinder static-body radius="3.5" height="1.1" color="#1a110a" material="metalness: 0.4"></a-cylinder>
            <a-cylinder position="0 1.15 0" radius="3.2" height="0.1" color="#043314"></a-cylinder>
            
            <a-text id="pot-text" value="TOTAL POT: $0" position="0 2.5 0" align="center" width="8" color="gold" font="exo2bold"></a-text>

            <a-box class="clickable" onclick="this.sceneEl.emit('bet', {amount: 500})" position="1.2 1.3 1" width="0.4" height="0.15" depth="0.3" color="gold">
                <a-text value="BET 500" align="center" rotation="-90 0 0" position="0 0.08 0" width="2.5" color="black"></a-text>
            </a-box>

            <a-cylinder class="clickable" onclick="alert('Victory!')" position="-1.2 1.3 1" radius="0.2" height="0.1" color="white">
                <a-text value="WIN" align="center" rotation="-90 0 0" position="0 0.06 0" width="3" color="black"></a-text>
            </a-cylinder>
        </a-entity>

        <a-entity position="-7 0 -8" rotation="0 45 0">
            <a-gltf-model src="#statue-glb" scale="1.5 1.5 1.5"></a-gltf-model>
            <a-box position="0 -0.5 0" width="1.2" height="1" depth="1.2" color="#111" material="metalness:1; roughness:0"></a-box>
        </a-entity>

        <a-entity position="7 0 -8" rotation="0 -45 0">
            <a-gltf-model src="#statue-glb" scale="1.5 1.5 1.5"></a-gltf-model>
            <a-box position="0 -0.5 0" width="1.2" height="1" depth="1.2" color="#111" material="metalness:1; roughness:0"></a-box>
        </a-entity>

        <a-entity id="rig" position="0 0 12" movement-controls="controls: touch, keyboard; speed: 0.2;" kinematic-body>
            <a-camera look-controls="pointerLockEnabled: false">
                <a-cursor color="gold" raycaster="objects: .clickable"></a-cursor>
            </a-camera>

            <a-entity id="leftHand" oculus-touch-controls="hand: left">
                <a-box position="0 0.02 0.05" scale="0.12 0.04 0.15" color="#111">
                    <a-plane position="0 0.51 0" rotation="-90 0 0" width="1.2" height="0.8" color="#000">
                        <a-text id="wrist-cash" value="BANK: $50,000" position="0 0.1 0.01" align="center" width="2.5" color="gold"></a-text>
                        <a-text value="SCARLETT OS" position="0 -0.2 0.01" align="center" width="1.5" color="#444"></a-text>
                    </a-plane>
                </a-box>
            </a-entity>

            <a-entity id="rightHand" oculus-touch-controls="hand: right" laser-controls="hand: right" raycaster="objects: .clickable;"></a-entity>
        </a-entity>

        <a-light type="ambient" intensity="0.4"></a-light>
        <a-light type="point" position="0 10 -5" intensity="1.5" color="gold"></a-light>
    </a-scene>
</body>
</html>
