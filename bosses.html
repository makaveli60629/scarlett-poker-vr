<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Scarlett VR Poker - Titan Vault</title>
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-physics-system@v4.2.2/dist/aframe-physics-system.min.js"></script>
  <script src="js/table-game.js"></script>
  <script src="js/economy.js"></script>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <!-- VR Overlay -->
  <div id="overlay">
    <h1 class="title">TITAN VAULT</h1>
    <p style="color: gold; letter-spacing: 4px;">HIGH-STAKES POKER</p>
    <button class="btn" onclick="startVault()">ENTER VAULT</button>
  </div>

  <a-scene physics="debug: false">
    <a-assets>
      <!-- Assets -->
      <a-asset-item id="boss-glb" src="https://cdn.glitch.global/boss.glb"></a-asset-item>
      <a-asset-item id="crown-glb" src="https://cdn.glitch.global/crown.glb"></a-asset-item>
    </a-assets>

    <!-- Sky & Atmosphere -->
    <a-sky color="#0a0a0a"></a-sky>
    <a-entity position="0 5 -5" particle-system="preset: fireworks; color: #d4af37; particleCount: 1500; size: 0.2"></a-entity>

    <!-- Floor -->
    <a-plane static-body rotation="-90 0 0" width="100" height="100" color="#080808"></a-plane>

    <!-- High Stakes Table -->
    <a-entity id="vaultTable" position="0 0 -5">
      <a-cylinder static-body radius="4" height="1.2" color="#1a0f0f" material="metalness: 0.6"></a-cylinder>
      <a-cylinder position="0 1.2 0" radius="3.8" height="0.15" color="#043314"></a-cylinder>
      <a-text value="Titan Table" position="0 2.8 0" align="center" width="10" color="gold"></a-text>
      <a-gltf-model src="#crown-glb" position="0 3.5 0" scale="1.5 1.5 1.5"></a-gltf-model>
    </a-entity>

    <!-- Boss NPCs -->
    <a-entity id="bosses">
      <a-gltf-model src="#boss-glb" position="-3 0 -5" scale="1.2 1.2 1.2"></a-gltf-model>
      <a-gltf-model src="#boss-glb" position="3 0 -5" scale="1.2 1.2 1.2"></a-gltf-model>
    </a-entity>

    <!-- Player Rig -->
    <a-entity id="rig" position="0 0 10" movement-controls="controls: touch, keyboard; speed:0.25" kinematic-body>
      <a-camera look-controls="pointerLockEnabled:false">
        <a-cursor color="gold" raycaster="objects: .clickable"></a-cursor>
      </a-camera>

      <!-- Left Hand HUD -->
      <a-entity id="leftHand" oculus-touch-controls="hand: left">
        <a-box position="0 0.02 0.05" scale="0.12 0.04 0.15" color="#111">
          <a-plane position="0 0.51 0" rotation="-90 0 0" width="1.2" height="0.8" color="#000">
            <a-text id="wrist-cash" value="BANK: $50,000" position="0 0.1 0.01" align="center" width="2.5" color="gold"></a-text>
            <a-text value="SCARLETT OS" position="0 -0.2 0.01" align="center" width="1.5" color="#444"></a-text>
          </a-plane>
        </a-box>
      </a-entity>

      <!-- Right Hand -->
      <a-entity id="rightHand" oculus-touch-controls="hand: right" laser-controls="hand: right" raycaster="objects: .clickable;"></a-entity>
    </a-entity>

    <!-- Lights -->
    <a-light type="ambient" intensity="0.4"></a-light>
    <a-light type="point" position="0 10 -5" intensity="1.8" color="gold"></a-light>
    <a-light type="spot" position="0 5 -2" angle="30" penumbra="1" intensity="2" color="gold"></a-light>
  </a-scene>

  <script>
    function startVault(){
      document.getElementById('overlay').style.display='none';
      const scene = document.querySelector('a-scene');
      if(scene.audioListener) scene.audioListener.context.resume();
      // Initialize economy & table game logic
      const rig = document.querySelector('#rig');
      rig.setAttribute('economy','');
      rig.setAttribute('table-game','highStakes:true;');
    }
  </script>
</body>
</html>
