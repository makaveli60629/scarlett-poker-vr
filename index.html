<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SCORIPON ELITE - V1.5 MASTER</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-blink-controls/dist/aframe-blink-controls.min.js"></script>
    
    <script>
        // PURPLE GLOW SHADER
        AFRAME.registerShader('purple-glow', {
            vertexShader: `varying vec2 vUv; void main() { vUv = uv; gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0); }`,
            fragmentShader: `varying vec2 vUv; void main() { gl_FragColor = vec4(0.6, 0.2, 1.0, 1.0); }`
        });

        AFRAME.registerComponent('poker-master', {
            init: function () {
                this.balance = 5000;
                this.playerEl = document.querySelector('#player');
                this.watchText = document.querySelector('#watch-stats');
                this.playerEl.setAttribute('position', "0 0 5");
                
                // Menu Toggle Logic
                this.menuOpen = false;
                this.menuPanel = document.querySelector('#menu-panel');
            },
            toggleMenu: function() {
                this.menuOpen = !this.menuOpen;
                this.menuPanel.setAttribute('visible', this.menuOpen);
            },
            tick: function() {
                const now = new Date();
                const time = now.getHours() + ":" + now.getMinutes().toString().padStart(2, '0');
                if(this.watchText) this.watchText.setAttribute('value', `${time}\n$${this.balance}`);
            }
        });
    </script>
</head>
<body>
    <a-scene poker-master renderer="antialias: true; colorManagement: true;">
        
        <a-assets>
            <img id="tex-floor" src="assets/textures/Marblegold floors.jpg">
            <img id="tex-brand" src="assets/textures/Scoripon room brand.jpg">
            <img id="tex-trim" src="assets/textures/Table leather trim.jpg">
            <img id="tex-glow" src="assets/textures/Teleport glow.jpg">
            <img id="tex-brick" src="https://i.imgur.com/8X9989G.jpg"> </a-assets>

        <a-sky color="#B0E2FF" material="luminance: 1"></a-sky> 
        <a-light type="ambient" intensity="1.5"></a-light>
        <a-light type="point" position="0 10 0" intensity="2"></a-light>

        <a-entity id="player">
            <a-camera id="cam"><a-cursor visible="false"></a-cursor></a-camera>
            
            <a-entity id="leftHand" 
                      hand-tracking-controls="hand: left; modelColor: #5c4033;" 
                      blink-controls="cameraRig: #player; teleportOrigin: #cam; snapImage: #tex-glow; startEvents: pinchstarted; endEvents: pinchended;">
                
                <a-entity id="slim-watch" position="0 0.04 0.08" rotation="-90 0 0">
                    <a-box width="0.06" height="0.04" depth="0.01" color="#111">
                        <a-text id="watch-stats" color="#0FF" scale="0.08 0.08 0.08" position="0 0 0.006" align="center"></a-text>
                    </a-box>
                    <a-circle radius="0.01" color="white" position="0 -0.03 0" onclick="document.querySelector('[poker-master]').components['poker-master'].toggleMenu()"></a-circle>
                </a-entity>

                <a-plane id="menu-panel" position="0 0.15 0" width="0.3" height="0.4" color="#222" visible="false">
                    <a-text value="STORE\n\nLOBBY\n\nEXIT" align="center" scale="0.2 0.2 0.2"></a-text>
                </a-plane>
            </a-entity>

            <a-entity id="rightHand" hand-tracking-controls="hand: right; modelColor: #5c4033;"></a-entity>
        </a-entity>

        <a-plane class="nav-mesh" rotation="-90 0 0" width="60" height="60" src="#tex-floor" repeat="15 15"></a-plane>

        <a-entity id="poker-room">
            <a-entity id="main-walls">
                <a-box position="0 4.5 -15" width="30" height="9" src="#tex-brick">
                    <a-plane position="0 0.5 0.51" width="8" height="4" src="#tex-brand" transparent="true"></a-plane>
                    <a-box position="0 4.4 0.52" width="30" height="0.2" material="shader: purple-glow;"></a-box>
                    <a-box position="0 -4.4 0.52" width="30" height="0.2" material="shader: purple
