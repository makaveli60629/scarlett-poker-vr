<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Brick Club VR - Luxury Edition</title>
    <style>
        body { margin: 0; background: #000; overflow: hidden; }
        #overlay {
            position: absolute; width: 100%; height: 100%; display: flex;
            flex-direction: column; justify-content: center; align-items: center;
            background: #1a1a1a; z-index: 20; color: white; font-family: sans-serif;
        }
        button {
            padding: 20px 60px; font-size: 24px; background: #8B0000;
            color: white; border: 2px solid #ffd700; border-radius: 50px; cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="overlay">
        <h1 style="letter-spacing: 5px;">BRICK CLUB VR</h1>
        <p>LUXURY EDITION</p>
        <button id="enter-btn">ENTER CLUB</button>
    </div>

    <script type="module">
        import * as THREE from 'https://cdn.skypack.dev/three@0.136.0';
        import { VRButton } from 'https://cdn.skypack.dev/three@0.136.0/examples/jsm/webxr/VRButton.js';

        let scene, camera, renderer, menu, backDoor;
        let isMenuOpen = false;

        function init() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.xr.enabled = true;
            document.body.appendChild(renderer.domElement);
            document.body.appendChild(VRButton.createButton(renderer));

            // LIGHTING (Recessed Ceiling Lights)
            const ambient = new THREE.AmbientLight(0xffffff, 0.4);
            scene.add(ambient);
            for(let i=0; i<3; i++) {
                const light = new THREE.PointLight(0xffffff, 1, 10);
                light.position.set(0, 4.8, -(i * 12));
                scene.add(light);
            }

            buildLuxuryRoom();
            createPremiumTable();
            createAvatar();
            createVRMenu();
            setupControllers();

            renderer.setAnimationLoop(render);
        }

        function buildLuxuryRoom() {
            const loader = new THREE.TextureLoader();
            const brickTex = loader.load('https://threejs.org/examples/textures/brick_diffuse.jpg');
            
            // 1. CEILING (White)
            const ceilGeo = new THREE.PlaneGeometry(20, 100);
            const ceilMat = new THREE.MeshStandardMaterial({color: 0xffffff});
            const ceiling = new THREE.Mesh(ceilGeo, ceilMat);
            ceiling.rotation.x = Math.PI / 2;
            ceiling.position.y = 5;
            scene.add(ceiling);

            // 2. FLOOR (Red Carpet)
            const floorGeo = new THREE.PlaneGeometry(20, 100);
            const floorMat = new THREE.MeshStandardMaterial({color: 0x8B0000}); // Deep Red
            const floor = new THREE.Mesh(floorGeo, floorMat);
            floor.rotation.x = -Math.PI / 2;
            scene.add(floor);

            // 3. WALLS (Brick Top, White Panel Bottom)
            const wallGroup = new THREE.Group();
            // Brick Upper
            const upperWall = new THREE.Mesh(new THREE.BoxGeometry(10, 3, 40), new THREE.MeshStandardMaterial({map: brickTex}));
            upperWall.position.y = 3.5;
            // White Lower Panel
            const lowerWall = new THREE.Mesh(new THREE.BoxGeometry(10.1, 2, 40), new THREE.MeshStandardMaterial({color: 0xeeeeee}));
            lowerWall.position.y = 1;
            
            wallGroup.add(upperWall, lowerWall);
            scene.add(wallGroup);
        }

        function createPremiumTable() {
            const table = new THREE.Group();
            // Mahogany Base
            const base = new THREE.Mesh(new THREE.CylinderGeometry(2.2, 2.1, 0.3), new THREE.MeshStandardMaterial({color: 0x3d0c02}));
            // Felt Top
            const felt = new THREE.Mesh(new THREE.CylinderGeometry(2, 2, 0.31), new THREE.MeshStandardMaterial({color: 0x076324}));
            // Branding
            const logo = new THREE.Mesh(new THREE.CircleGeometry(0.6, 32), new THREE.MeshBasicMaterial({color: 0xffffff, transparent: true, opacity: 0.4}));
            logo.rotation.x = -Math.PI / 2;
            logo.position.y = 0.17;
            
            table.add(base, felt, logo);
            table.position.set(0, 0.8, -5);
            scene.add(table);
        }

        function createAvatar() {
            // Placeholder for your Avatars
            const head = new THREE.Mesh(new THREE.SphereGeometry(0.15), new THREE.MeshStandardMaterial({color: 0xffdbac}));
            head.position.set(0, 1.2, -6.5);
            scene.add(head);
        }

        function createVRMenu() {
            menu = new THREE.Group();
            const bg = new THREE.Mesh(new THREE.PlaneGeometry(0.4, 0.25), new THREE.MeshBasicMaterial({color: 0x000000, transparent: true, opacity: 0.8}));
            const exitBtn = new THREE.Mesh(new THREE.PlaneGeometry(0.35, 0.1), new THREE.MeshBasicMaterial({color: 0xaa0000}));
            exitBtn.position.z = 0.01;
            menu.add(bg, exitBtn);
            menu.visible = false;
            scene.add(menu);
        }

        function setupControllers() {
            const cLeft = renderer.xr.getController(0);
            cLeft.addEventListener('selectstart', () => {
                if(isMenuOpen) { window.location.reload(); }
                else { 
                    isMenuOpen = !isMenuOpen;
                    menu.visible = isMenuOpen;
                    menu.position.set(camera.position.x, camera.position.y, camera.position.z - 0.5);
                }
            });
            scene.add(cLeft);
        }

        function render() { renderer.render(scene, camera); }

        document.getElementById('enter-btn').onclick = () => {
            document.getElementById('overlay').style.display = 'none';
            camera.position.set(0, 1.2, -4.5); // AUTO-SIT
        };

        init();
    </script>
</body>
</html>
