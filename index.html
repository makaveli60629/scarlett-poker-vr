<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>TITAN ESTATE VR - PERMANENT BUILD</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-teleport-controls@0.3.1/dist/aframe-teleport-controls.min.js"></script>
    
    <script>
        // --- GAME LOGIC ENGINE ---
        let wallet = 25000;
        let dailyClaimed = false;

        // Auto-load Sequence
        window.onload = function() {
            console.log("Titan Estate Initializing...");
            setTimeout(() => {
                document.getElementById('splash').setAttribute('visible', 'false');
                document.getElementById('world-content').setAttribute('visible', 'true');
                document.getElementById('ambient-sound').components.sound.playSound();
            }, 5000); 
        };

        // Blue's Daily Giveaway Logic
        function blueReward(amount) {
            if (!dailyClaimed) {
                wallet += amount;
                dailyClaimed = true;
                updateHUD();
                triggerVictoryEffect();
                document.getElementById('blue-msg').setAttribute('value', "WOOF! ENJOY THE $" + amount + "!");
            }
        }

        // Automatic Sit & Poker Logic
        function sitAtTable(pos, cost) {
            if (wallet >= cost) {
                wallet -= cost;
                updateHUD();
                document.getElementById('rig').setAttribute('position', pos);
                document.getElementById('poker-status').setAttribute('value', "CARDS DEALT - GOOD LUCK");
            }
        }

        function updateHUD() {
            const watchText = document.querySelectorAll('.wallet-display');
            watchText.forEach(el => el.setAttribute('value', '$' + wallet));
        }

        function triggerVictoryEffect() {
            let vLight = document.getElementById('victory-light');
            vLight.setAttribute('intensity', '5');
            setTimeout(() => vLight.setAttribute('intensity', '0'), 1000);
            document.getElementById('reward-sound').components.sound.playSound();
        }
    </script>
</head>
<body>
    <a-scene renderer="antialias: true; colorManagement: true;">
        
        <a-assets>
            <img id="tex-bricks" src="https://i.imgur.com/89SBy0Y.jpg" crossorigin="anonymous">
            <img id="tex-carpet" src="https://i.imgur.com/2R7W5r6.jpg" crossorigin="anonymous">
            <img id="tex-felt" src="https://i.imgur.com/vH9vT7U.jpg" crossorigin="anonymous">
            <audio id="snd-ambient" src="https://cdn.aframe.io/basic-guide/audio/backgroundnoise.wav" preload="auto"></audio>
            <audio id="snd-reward" src="https://cdn.aframe.io/360-video-example/unmute.mp3" preload="auto"></audio>
        </a-assets>

        <a-entity id="rig" position="0 0 10">
            <a-camera id="head" position="0 1.6 0" look-controls>
                <a-cursor color="gold" radius-inner="0.01" radius-outer="0.02"></a-cursor>
            </a-camera>

            <a-entity oculus-touch-controls="hand: left" teleport-controls="cameraRig: #rig; teleportOrigin: #head; button: trigger; curveHitColor: gold; type: parabolic;">
                <a-box position="0 0.05 0.1" rotation="-90 0 0" width="0.12" height="0.12" depth="0.04" color="#111">
                    <a-text class="wallet-display" value="$25000" color="gold" align="center" position="0 0 0.021" width="1"></a-text>
                    <a-plane position="0 0 0.02" width="0.11" height="0.11" color="black" opacity="0.8"></a-plane>
                </a-box>
            </a-entity>

            <a-entity oculus-touch-controls="hand: right" teleport-controls="cameraRig: #rig; teleportOrigin: #head; button: trigger; curveHitColor: gold; type: parabolic;"></a-entity>
        </a-entity>

        <a-entity id="splash" position="0 1.6 8">
            <a-plane width="10" height="10" color="black" position="0 0 -1"></a-plane>
            <a-text value="TEAM NOVA" color="gold" align="center" position="0 0.5 0" width="8"></a-text>
            <a-text value="SCARLET VR: TITAN ESTATE" color="white" align="center" position="0 0 0" width="5"></a-text>
            <a-text value="INITIALIZING VR CASINO..." color="#444" align="center" position="0 -0.5 0" width="3"></a-text>
        </a-entity>

        <a-entity id="world-content" visible="false">
            <a-sky color="#020202"></a-sky>
            <a-entity id="ambient-sound" sound="src: #snd-ambient; loop: true; volume: 0.3"></a-entity>
            <a-entity id="reward-sound" sound="src: #snd-reward;"></a-entity>
            <a-light id="victory-light" type="point" position="0 3 5" intensity="0" color="gold"></a-light>
            <a-light type="ambient" color="#333"></a-light>
            <a-light type="point" position="0 5 0" intensity="1.5" color="#FFD700"></a-light>

            <a-plane src="#tex-carpet" repeat="20 20" rotation="-90 0 0" width="50" height="50"></a-plane>
            <a-plane color="#111" rotation="90 0 0" position="0 5 0" width="50" height="50"></a-plane>

            <a-box src="#tex-bricks" repeat="10 2" position="0 2.5 -15" width="30" height="5" depth="0.5"></a-box> <a-box src="#tex-bricks" repeat="10 2" position="-15 2.5 0" width="0.5" height="5" depth="30"></a-box> <a-box src="#tex-bricks" repeat="10 2" position="15 2.5 0" width="0.5" height="5" depth="30"></a-box> <a-entity position="0 0 5">
                <a-box width="4" height="1" depth="1.5" color="#1a1a1a">
                    <a-text id="blue-msg" value="DAILY GIVEAWAY" align="center" color="gold" position="0 0.6 0.76" width="3"></a-text>
                </a-box>
                <a-entity position="0 0.5 -0.5">
                    <a-box width="0.5" height="0.8" color="white"></a-box>
                    <a-box width="0.4" height="0.4" position="0 0.6 0" color="#555">
                        <a-sphere radius="0.02" color="cyan" position="0.1 0.1 0.2"></a-sphere>
                        <a-sphere radius="0.02" color="cyan" position="-0.1 0.1 0.2"></a-sphere>
                    </a-box>
                </a-animation>
                </a-entity>
                <a-box class="clickable" width="0.3" height="0.45" color="white" position="-0.5 1.5 0.5" onclick="blueReward(5000)"></a-box>
                <a-box class="clickable" width="0.3" height="0.45" color="white" position="0.5 1.5 0.5" onclick="blueReward(10000)"></a-box>
            </a-entity>

            <a-entity position="0 0 -5">
                <a-cylinder src="#tex-felt" radius="2.5" height="0.1" position="0 0.9 0" segments-radial="12">
                    <a-text value="TITAN ESTATE" align="center" rotation="-90 0 0" position="0 0.06 0" color="gold" width="6"></a-text>
                </a-cylinder>
                <a-text id="poker-status" value="WALK TO TABLE TO PLAY" position="0 2.5 0" align="center" color="white" width="4"></a-text>
                
                <a-entity position="0 1 0.7">
                    <a-box color="white" width="0.2" height="0.02" depth="0.3" position="-0.15 0 0"><a-text value="A" color="red" rotation="-90 0 0" align="center" position="0 0.02 0" width="2"></a-text></a-box>
                    <a-box color="white" width="0.2" height="0.02" depth="0.3" position="0.15 0 0"><a-text value="K" color="black" rotation="-90 0 0" align="center" position="0 0.02 0" width="2"></a-text></a-box>
                </a-entity>

                <a-box class="clickable" position="0 0.1 1.8" width="1.5" height="0.2" depth="0.6" color="gold" onclick="sitAtTable('0 0 -4.2', 1000)">
                    <a-text value="SIT & PLAY" align="center" rotation="-90 0 0" position="0 0.12 0" color="black" width="4"></a-text>
                </a-box>
            </a-entity>

        </a-entity>
    </a-scene>
</body>
</html>
